import{c as U,r as u,j as e,m as C,T as te,A as I,C as ue,S as se,a as B,M as fe,E as ye,b as R,U as q,L as De,d as Ne,e as J,f as oe,R as Fe,P as Ee,g as he,h as xe,i as Ce,k as K,l as ve,Z as be,B as pe,n as Ve,o as Y,F as Te,p as Ge,q as Xe,s as Ae,t as Se,u as Z,G as ke,v as Oe,w as Le,x as Me,y as $e,z as Ie,D as Re,H as ze,I as We,J as Pe}from"./index-saNUYX1W.js";import{P as ee}from"./ProgressBar-D7OdzFnS.js";import{u as _e,a as He,b as Be}from"./useRealtimeConnection-L9KDNTbM.js";import{R as Ue}from"./rotate-ccw-DHXgKrWk.js";import{F as qe}from"./file-code-CaqBytno.js";const Qe=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ke=U("archive",Qe);const Je=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],re=U("ellipsis-vertical",Je);const Ye=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ze=U("eye-off",Ye);const et=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],ge=U("network",et),tt=({visionData:i,projectState:c,agentActivity:t,onModeChange:r,currentMode:o})=>{const[a,l]=u.useState(!1),[n,f]=u.useState(null),[g,b]=u.useState(!0),V=t.filter(s=>({ceo:["ceo"],vp:["ceo","vp"],engineer:["ceo","vp","engineer"],builder:["ceo","vp","engineer","builder"],founder:["ceo","vp","engineer","builder","founder"]})[o].includes(s.visibility)),v={planning:20,architecting:40,building:60,testing:80,deploying:100},F=s=>s>=80?"text-green-400 bg-green-500/10 border-green-500/20":s>=60?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-red-400 bg-red-500/10 border-red-500/20",G=s=>({idle:"bg-gray-500",thinking:"bg-yellow-500",working:"bg-green-500",blocked:"bg-red-500",discussing:"bg-blue-500"})[s];return e.jsxDEV("div",{className:"min-h-screen bg-gray-950 text-gray-100","data-testid":"dashboard-container",children:[e.jsxDEV("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxDEV(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 p-6 rounded-2xl bg-gradient-to-r from-purple-900/20 to-blue-900/20 border border-purple-500/20","data-testid":"dashboard-vision-card",children:e.jsxDEV("div",{className:"flex items-start gap-4",children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 border border-purple-500/30 flex items-center justify-center flex-shrink-0",children:e.jsxDEV(te,{className:"w-6 h-6 text-purple-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:193,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:192,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h2",{className:"text-lg font-semibold mb-2 text-purple-100","data-testid":"dashboard-mission-title",children:"Mission"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:196,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-300 mb-4","data-testid":"dashboard-mission-text",children:i.mission},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:202,columnNumber:15},void 0),(o==="founder"||o==="ceo")&&e.jsxDEV("div",{className:"flex gap-6 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"text-gray-500",children:"Timeframe:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:212,columnNumber:21},void 0),e.jsxDEV("span",{className:"ml-2 text-gray-300",children:i.timeframe},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:213,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:211,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"text-gray-500",children:"Goals:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:218,columnNumber:21},void 0),e.jsxDEV("span",{className:"ml-2 text-gray-300",children:[i.goals.length," defined"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:219,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:217,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"text-gray-500",children:"Metrics:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:224,columnNumber:21},void 0),e.jsxDEV("span",{className:"ml-2 text-gray-300",children:[i.successMetrics.length," tracked"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:225,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:223,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:210,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:195,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:191,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:185,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxDEV(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"lg:col-span-2 p-6 rounded-2xl bg-gray-900/50 border border-gray-800","data-testid":"dashboard-progress-card",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold flex items-center gap-2","data-testid":"dashboard-progress-title",children:[e.jsxDEV(I,{className:"w-5 h-5 text-blue-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:250,columnNumber:17},void 0),"Project Progress"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:246,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-2xl font-bold text-blue-400","data-testid":"dashboard-progress-value",children:[c.progress,"%"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:253,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:245,columnNumber:13},void 0),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:Object.entries(v).map(([s,j])=>e.jsxDEV("div",{className:`
                      text-xs font-medium capitalize
                      ${c.phase===s?"text-blue-400":"text-gray-500"}
                    `,children:s},s,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:265,columnNumber:19},void 0))},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:263,columnNumber:15},void 0),e.jsxDEV("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:e.jsxDEV(C.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500",initial:{width:0},animate:{width:`${v[c.phase]??0}%`},transition:{duration:1,ease:"easeOut"}},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:277,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:276,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:262,columnNumber:13},void 0),o!=="ceo"&&e.jsxDEV("div",{className:"space-y-3","data-testid":"dashboard-active-agents",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-400","data-testid":"dashboard-agents-title",children:"Active Agents"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:289,columnNumber:17},void 0),(c.activeAgents||[]).map(s=>e.jsxDEV("div",{onClick:()=>f(s),className:"flex items-center justify-between p-3 rounded-xl bg-gray-900 border border-gray-800 hover:border-gray-700 cursor-pointer transition-all","data-testid":`dashboard-agent-card-${s.id}`,children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${G(s.status)} animate-pulse`},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:303,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium text-sm",children:s.name},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:307,columnNumber:25},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500",children:s.currentTask},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:308,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:306,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:302,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"text-xs text-gray-400",children:[s.confidence,"% confident"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:314,columnNumber:23},void 0),e.jsxDEV(ue,{className:"w-4 h-4 text-gray-600"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:317,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:313,columnNumber:21},void 0)]},s.id,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:296,columnNumber:19},void 0))]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:288,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:238,columnNumber:11},void 0),e.jsxDEV(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"space-y-6",children:[e.jsxDEV("div",{className:`p-6 rounded-2xl border ${F(c.healthScore)}`,"data-testid":"dashboard-health-card",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold","data-testid":"dashboard-health-title",children:"System Health"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:338,columnNumber:17},void 0),e.jsxDEV(se,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:344,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:337,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-4xl font-bold mb-2","data-testid":"dashboard-health-score",children:[c.healthScore,"%"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:346,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm opacity-75",children:c.healthScore>=80?"All systems optimal":c.healthScore>=60?"Minor issues detected":"Attention required"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:352,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:333,columnNumber:13},void 0),(c.blockers||[]).length>0&&e.jsxDEV("div",{className:"p-6 rounded-2xl bg-red-900/10 border border-red-500/20","data-testid":"dashboard-blockers-card",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-red-400","data-testid":"dashboard-blockers-title",children:"Blockers"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:368,columnNumber:19},void 0),e.jsxDEV(B,{className:"w-5 h-5 text-red-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:374,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:367,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2","data-testid":"dashboard-blockers-list",children:(c.blockers||[]).slice(0,o==="ceo"?1:3).map(s=>e.jsxDEV("div",{className:"p-3 rounded-lg bg-gray-900/50 border border-gray-800","data-testid":`dashboard-blocker-${s.id}`,children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium",children:s.title},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:390,columnNumber:29},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:[s.agent," • ",s.severity]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:393,columnNumber:29},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:389,columnNumber:27},void 0),s.needsHuman&&e.jsxDEV("div",{className:"px-2 py-1 rounded-full bg-yellow-500/20 text-yellow-400 text-xs",children:"Needs input"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:398,columnNumber:29},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:388,columnNumber:25},void 0)},s.id,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:383,columnNumber:23},void 0))},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:376,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:363,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:326,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:236,columnNumber:9},void 0),o!=="ceo"&&e.jsxDEV(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-6 rounded-2xl bg-gray-900/50 border border-gray-800","data-testid":"dashboard-activity-stream",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold flex items-center gap-2","data-testid":"dashboard-activity-title",children:[e.jsxDEV(fe,{className:"w-5 h-5 text-green-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:425,columnNumber:17},void 0),"Agent Activity"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:421,columnNumber:15},void 0),e.jsxDEV("button",{onClick:()=>l(!a),className:"text-sm text-gray-400 hover:text-gray-300 flex items-center gap-1","data-testid":"dashboard-toggle-details-btn",children:[a?e.jsxDEV(Ze,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:434,columnNumber:19},void 0):e.jsxDEV(ye,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:436,columnNumber:19},void 0),a?"Hide":"Show"," Details"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:428,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:420,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:e.jsxDEV(R,{children:V.slice(0,a?void 0:5).map((s,j)=>e.jsxDEV(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:j*.05},className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-900 transition-all",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gray-800 flex items-center justify-center flex-shrink-0",children:e.jsxDEV(q,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:456,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:455,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"text-sm",children:[e.jsxDEV("span",{className:"font-medium text-blue-400",children:s.agentId},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:460,columnNumber:27},void 0),e.jsxDEV("span",{className:"text-gray-400 mx-2",children:"•"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:463,columnNumber:27},void 0),e.jsxDEV("span",{className:"text-gray-300",children:s.action},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:464,columnNumber:27},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:459,columnNumber:25},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:new Date(s.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:468,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:458,columnNumber:23},void 0)]},`${s.agentId}-${j}`,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:447,columnNumber:21},void 0))},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:443,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:442,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:413,columnNumber:11},void 0),(o==="vp"||o==="founder")&&(c.recentDecisions||[]).length>0&&e.jsxDEV(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-6 p-6 rounded-2xl bg-gray-900/50 border border-gray-800",children:[e.jsxDEV("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-6",children:[e.jsxDEV(De,{className:"w-5 h-5 text-purple-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:489,columnNumber:17},void 0),"Recent Strategic Decisions"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:488,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(c.recentDecisions||[]).slice(0,4).map(s=>e.jsxDEV("div",{className:"p-4 rounded-xl bg-gray-900 border border-gray-800",children:[e.jsxDEV("div",{className:"flex items-start justify-between mb-2",children:[e.jsxDEV("div",{className:`
                      px-2 py-1 rounded-full text-xs font-medium
                      ${s.type==="architecture"?"bg-purple-500/20 text-purple-400":s.type==="implementation"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}
                    `,children:s.type},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:501,columnNumber:25},void 0),e.jsxDEV("div",{className:`
                      text-xs
                      ${s.impact==="high"?"text-red-400":s.impact==="medium"?"text-yellow-400":"text-gray-400"}
                    `,children:[s.impact," impact"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:515,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:500,columnNumber:23},void 0),e.jsxDEV("h4",{className:"font-medium mb-1",children:s.title},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:530,columnNumber:23},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500",children:["by ",s.madeBy," •"," ",new Date(s.timestamp).toLocaleTimeString()]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:531,columnNumber:23},void 0)]},s.id,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:496,columnNumber:21},void 0))},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:492,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:482,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:183,columnNumber:7},void 0),e.jsxDEV(R,{children:n&&e.jsxDEV(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-6",onClick:()=>f(null),children:e.jsxDEV(C.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:s=>s.stopPropagation(),className:"w-full max-w-2xl bg-gray-900 rounded-2xl border border-gray-800 p-8",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full ${G(n.status)}`},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:561,columnNumber:19},void 0),e.jsxDEV("h2",{className:"text-2xl font-bold",children:n.name},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:564,columnNumber:19},void 0),e.jsxDEV("div",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-sm",children:n.role},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:565,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:560,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>f(null),className:"text-gray-500 hover:text-gray-300",children:"✕"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:569,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:559,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm text-gray-400 mb-1",children:"Current Task"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:579,columnNumber:19},void 0),e.jsxDEV("div",{className:"p-3 rounded-lg bg-gray-800",children:n.currentTask},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:580,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:578,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm text-gray-400 mb-1",children:"Status"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:585,columnNumber:19},void 0),e.jsxDEV("div",{className:"capitalize",children:n.status},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:586,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:584,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm text-gray-400 mb-1",children:"Confidence Level"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:589,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(ee,{value:n.confidence,max:100,className:"flex-1 h-2",fillColor:"bg-gradient-to-r from-blue-500 to-green-500",animated:!1},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:593,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:[n.confidence,"%"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:600,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:592,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:588,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:577,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:552,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:545,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:543,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/ChiefOfStaffDashboard.tsx",lineNumber:179,columnNumber:5},void 0)},st=({onCommandExecute:i,availableCommands:c,projectContext:t,isExecuting:r,isLoadingCommands:o=!1})=>{const[a,l]=u.useState(!1),[n,f]=u.useState(""),[g,b]=u.useState(null),[V,v]=u.useState(c),[F,G]=u.useState([]),[s,j]=u.useState(!0);u.useEffect(()=>{if(n){const x=c.filter(m=>m.name.toLowerCase().includes(n.toLowerCase())||m.description.toLowerCase().includes(n.toLowerCase()));v(x)}else v(c)},[n,c]),u.useEffect(()=>{const x=m=>{(m.metaKey||m.ctrlKey)&&m.key==="k"&&(m.preventDefault(),l(!0)),m.key==="Escape"&&(n?f(""):l(!1)),m.key==="Enter"&&g&&a&&w(g)};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[g,a,n]);const w=x=>{x.requiresConfirmation&&!window.confirm(`Execute "${x.name}"? ${x.description}`)||(i(x.id),G(m=>[x.id,...m.slice(0,9)]),l(!1),f(""))},D={forge:"text-purple-400 bg-purple-500/10 border-purple-500/20",git:"text-green-400 bg-green-500/10 border-green-500/20",test:"text-blue-400 bg-blue-500/10 border-blue-500/20",deploy:"text-orange-400 bg-orange-500/10 border-orange-500/20",analyze:"text-cyan-400 bg-cyan-500/10 border-cyan-500/20"},A=[{id:"frg-status",label:"Status",icon:e.jsxDEV(I,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:147,columnNumber:13},void 0),color:"blue"},{id:"frg-feature",label:"New Feature",icon:e.jsxDEV(Ee,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:153,columnNumber:13},void 0),color:"green"},{id:"frg-test",label:"Run Tests",icon:e.jsxDEV(he,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:159,columnNumber:13},void 0),color:"purple"},{id:"frg-deploy",label:"Deploy",icon:e.jsxDEV(xe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:165,columnNumber:13},void 0),color:"orange"}];return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(C.button,{onClick:()=>l(!0),className:"fixed bottom-6 right-6 z-40 group",whileHover:{scale:1.05},whileTap:{scale:.95},"data-testid":"command-center-trigger-btn",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center shadow-lg",children:e.jsxDEV(Ne,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:182,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:181,columnNumber:11},void 0),t.activeAgents>0&&e.jsxDEV("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full animate-pulse border-2 border-gray-950"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:187,columnNumber:13},void 0),e.jsxDEV("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1.5 bg-gray-900 rounded-lg text-xs text-gray-300 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-xs",children:"⌘"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:193,columnNumber:15},void 0),e.jsxDEV("span",{children:"+"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:194,columnNumber:15},void 0),e.jsxDEV("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-xs",children:"K"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:195,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:192,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:191,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:180,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:173,columnNumber:7},void 0),s&&!a&&e.jsxDEV(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-6 left-6 z-30","data-testid":"command-center-quick-actions",children:e.jsxDEV("div",{className:"flex items-center gap-2 px-4 py-3 bg-gray-900/90 backdrop-blur-sm rounded-2xl border border-gray-800",children:[e.jsxDEV("div",{className:"text-xs text-gray-500 mr-2",children:"Quick:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:210,columnNumber:13},void 0),A.map(x=>e.jsxDEV("button",{onClick:()=>i(x.id),disabled:r,className:`
                  px-3 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-1.5
                  ${r?"opacity-50 cursor-not-allowed":"hover:bg-gray-800 active:scale-95"}
                `,"data-testid":`command-center-quick-${x.id}-btn`,children:[x.icon,x.label]},x.id,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:212,columnNumber:15},void 0))]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:209,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:203,columnNumber:9},void 0),e.jsxDEV(R,{children:a&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:239,columnNumber:13},void 0),e.jsxDEV(C.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{type:"spring",duration:.3},className:"fixed inset-x-0 top-20 mx-auto w-full max-w-2xl z-50 px-4","data-testid":"command-center-modal",children:e.jsxDEV("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 shadow-2xl overflow-hidden","data-testid":"command-center-palette",children:[e.jsxDEV("div",{className:"p-4 border-b border-gray-800","data-testid":"command-center-search-header",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(J,{className:"w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:266,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",value:n,onChange:x=>f(x.target.value),placeholder:"Type a command or search...",className:"flex-1 bg-transparent outline-none text-gray-100 placeholder-gray-500 text-lg",autoFocus:!0,"data-testid":"command-center-search-input"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:267,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[r&&e.jsxDEV("div",{className:"px-3 py-1 rounded-lg bg-yellow-500/20 text-yellow-400 text-xs flex items-center gap-1",children:[e.jsxDEV(oe,{className:"w-3 h-3 animate-spin"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:279,columnNumber:27},void 0),"Executing..."]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:278,columnNumber:25},void 0),e.jsxDEV("kbd",{className:"px-2 py-1 bg-gray-800 rounded text-xs text-gray-400",children:"ESC"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:283,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:276,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:265,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:261,columnNumber:17},void 0),e.jsxDEV("div",{className:"px-4 py-2 bg-gray-800/50 border-b border-gray-800",children:e.jsxDEV("div",{className:"flex items-center justify-between text-xs",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(te,{className:"w-3 h-3 text-purple-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:295,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-gray-400",children:"Project:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:296,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-gray-200 font-medium",children:t.name},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:297,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:294,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(I,{className:"w-3 h-3 text-blue-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:302,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-gray-400",children:"Phase:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:303,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-gray-200 font-medium",children:t.phase},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:304,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:301,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:293,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(q,{className:"w-3 h-3 text-green-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:311,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-gray-200",children:t.activeAgents},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:312,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-gray-400",children:"agents"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:315,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:310,columnNumber:23},void 0),e.jsxDEV("div",{className:`
                        px-2 py-0.5 rounded-full text-xs
                        ${t.healthScore>=80?"bg-green-500/20 text-green-400":t.healthScore>=60?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}
                      `,children:[t.healthScore,"% health"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:317,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:309,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:292,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:291,columnNumber:17},void 0),e.jsxDEV("div",{className:"max-h-96 overflow-y-auto","data-testid":"command-center-commands-list",children:o?e.jsxDEV("div",{className:"p-8 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gray-800 flex items-center justify-center",children:e.jsxDEV(Fe,{className:"w-8 h-8 text-gray-600 animate-spin"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:343,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:342,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-gray-400 mb-2",children:"Loading commands..."},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:345,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Fetching available NXTG-Forge commands"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:346,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:341,columnNumber:21},void 0):V.length>0?e.jsxDEV("div",{className:"p-2",children:Object.entries(V.reduce((x,m)=>(x[m.category]||(x[m.category]=[]),x[m.category].push(m),x),{})).map(([x,m])=>e.jsxDEV("div",{className:"mb-4","data-testid":`command-center-category-${x}`,children:[e.jsxDEV("div",{className:"px-3 py-1 mb-2",children:e.jsxDEV("span",{className:"text-xs font-medium text-gray-500 uppercase",children:x},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:368,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:367,columnNumber:27},void 0),m.map((h,y)=>e.jsxDEV("button",{onClick:()=>w(h),onMouseEnter:()=>b(h),className:`
                                w-full px-3 py-2.5 rounded-lg flex items-center gap-3 transition-all
                                ${g?.id===h.id?"bg-gray-800 text-gray-100":"hover:bg-gray-800/50 text-gray-300"}
                              `,"data-testid":`command-center-command-${h.id}`,children:[e.jsxDEV("div",{className:`
                                w-8 h-8 rounded-lg flex items-center justify-center border
                                ${D[h.category]}
                              `,children:h.icon},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:387,columnNumber:31},void 0),e.jsxDEV("div",{className:"flex-1 text-left",children:[e.jsxDEV("div",{className:"font-medium text-sm flex items-center gap-2",children:[h.name,h.hotkey&&e.jsxDEV("kbd",{className:"px-1.5 py-0.5 bg-gray-900 rounded text-xs text-gray-500",children:h.hotkey},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:399,columnNumber:37},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:396,columnNumber:33},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500",children:h.description},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:404,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:395,columnNumber:31},void 0),e.jsxDEV(ue,{className:"w-4 h-4 text-gray-600"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:408,columnNumber:31},void 0)]},h.id,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:373,columnNumber:29},void 0))]},x,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:362,columnNumber:25},void 0))},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:351,columnNumber:21},void 0):e.jsxDEV("div",{className:"p-8 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gray-800 flex items-center justify-center",children:e.jsxDEV(J,{className:"w-8 h-8 text-gray-600"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:417,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:416,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-gray-400 mb-2",children:"No commands found"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:419,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Try a different search term"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:420,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:415,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:336,columnNumber:17},void 0),F.length>0&&!n&&e.jsxDEV("div",{className:"p-4 border-t border-gray-800 bg-gray-800/30",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV(oe,{className:"w-3 h-3 text-gray-500"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:431,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:"Recent"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:432,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:430,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:F.slice(0,5).map(x=>{const m=c.find(h=>h.id===x);return m?e.jsxDEV("button",{onClick:()=>w(m),className:"px-3 py-1 rounded-lg bg-gray-900 border border-gray-800 text-xs text-gray-400 hover:text-gray-200 hover:border-gray-700 transition-all",children:m.name},x,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:441,columnNumber:27},void 0):null})},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:434,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:429,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:256,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:248,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:237,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:235,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/CommandCenter.tsx",lineNumber:171,columnNumber:5},void 0)};var ot=Ce();function P(i,c,t){let r=t.initialDeps??[],o,a=!0;function l(){var n,f,g;let b;t.key&&((n=t.debug)!=null&&n.call(t))&&(b=Date.now());const V=i();if(!(V.length!==r.length||V.some((G,s)=>r[s]!==G)))return o;r=V;let F;if(t.key&&((f=t.debug)!=null&&f.call(t))&&(F=Date.now()),o=c(...V),t.key&&((g=t.debug)!=null&&g.call(t))){const G=Math.round((Date.now()-b)*100)/100,s=Math.round((Date.now()-F)*100)/100,j=s/16,w=(D,A)=>{for(D=String(D);D.length<A;)D=" "+D;return D};console.info(`%c⏱ ${w(s,5)} /${w(G,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*j,120))}deg 100% 31%);`,t?.key)}return t?.onChange&&!(a&&t.skipInitialOnChange)&&t.onChange(o),a=!1,o}return l.updateDeps=n=>{r=n},l}function ie(i,c){if(i===void 0)throw new Error("Unexpected undefined");return i}const rt=(i,c)=>Math.abs(i-c)<1.01,it=(i,c,t)=>{let r;return function(...o){i.clearTimeout(r),r=i.setTimeout(()=>c.apply(this,o),t)}},ne=i=>{const{offsetWidth:c,offsetHeight:t}=i;return{width:c,height:t}},nt=i=>i,at=i=>{const c=Math.max(i.startIndex-i.overscan,0),t=Math.min(i.endIndex+i.overscan,i.count-1),r=[];for(let o=c;o<=t;o++)r.push(o);return r},lt=(i,c)=>{const t=i.scrollElement;if(!t)return;const r=i.targetWindow;if(!r)return;const o=l=>{const{width:n,height:f}=l;c({width:Math.round(n),height:Math.round(f)})};if(o(ne(t)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(l=>{const n=()=>{const f=l[0];if(f?.borderBoxSize){const g=f.borderBoxSize[0];if(g){o({width:g.inlineSize,height:g.blockSize});return}}o(ne(t))};i.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(n):n()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},ae={passive:!0},le=typeof window>"u"?!0:"onscrollend"in window,ct=(i,c)=>{const t=i.scrollElement;if(!t)return;const r=i.targetWindow;if(!r)return;let o=0;const a=i.options.useScrollendEvent&&le?()=>{}:it(r,()=>{c(o,!1)},i.options.isScrollingResetDelay),l=b=>()=>{const{horizontal:V,isRtl:v}=i.options;o=V?t.scrollLeft*(v&&-1||1):t.scrollTop,a(),c(o,b)},n=l(!0),f=l(!1);t.addEventListener("scroll",n,ae);const g=i.options.useScrollendEvent&&le;return g&&t.addEventListener("scrollend",f,ae),()=>{t.removeEventListener("scroll",n),g&&t.removeEventListener("scrollend",f)}},mt=(i,c,t)=>{if(c?.borderBoxSize){const r=c.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return i[t.options.horizontal?"offsetWidth":"offsetHeight"]},dt=(i,{adjustments:c=0,behavior:t},r)=>{var o,a;const l=i+c;(a=(o=r.scrollElement)==null?void 0:o.scrollTo)==null||a.call(o,{[r.options.horizontal?"left":"top"]:l,behavior:t})};class ut{constructor(c){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(o=>{o.forEach(a=>{const l=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var o;(o=r())==null||o.disconnect(),t=null},observe:o=>{var a;return(a=r())==null?void 0:a.observe(o,{box:"border-box"})},unobserve:o=>{var a;return(a=r())==null?void 0:a.unobserve(o)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,o])=>{typeof o>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:nt,rangeExtractor:at,onChange:()=>{},measureElement:mt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,o;(o=(r=this.options).onChange)==null||o.call(r,this,t)},this.maybeNotify=P(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=a,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const o=new Map,a=new Map;for(let l=r-1;l>=0;l--){const n=t[l];if(o.has(n.lane))continue;const f=a.get(n.lane);if(f==null||n.end>f.end?a.set(n.lane,n):n.end<f.end&&o.set(n.lane,!0),o.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((l,n)=>l.end===n.end?l.index-n.index:l.end-n.end)[0]:void 0},this.getMeasurementOptions=P(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(t,r,o,a,l,n)=>(this.prevLanes!==void 0&&this.prevLanes!==n&&(this.lanesChangedFlag=!0),this.prevLanes=n,this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:o,getItemKey:a,enabled:l,lanes:n}),{key:!1}),this.getMeasurements=P(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:o,getItemKey:a,enabled:l,lanes:n},f)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>t)for(const v of this.laneAssignments.keys())v>=t&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const g=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===t&&(this.lanesSettling=!1);const b=this.measurementsCache.slice(0,g),V=new Array(n).fill(void 0);for(let v=0;v<g;v++){const F=b[v];F&&(V[F.lane]=v)}for(let v=g;v<t;v++){const F=a(v),G=this.laneAssignments.get(v);let s,j;if(G!==void 0&&this.options.lanes>1){s=G;const x=V[s],m=x!==void 0?b[x]:void 0;j=m?m.end+this.options.gap:r+o}else{const x=this.options.lanes===1?b[v-1]:this.getFurthestMeasurement(b,v);j=x?x.end+this.options.gap:r+o,s=x?x.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,s)}const w=f.get(F),D=typeof w=="number"?w:this.options.estimateSize(v),A=j+D;b[v]={index:v,start:j,size:D,end:A,key:F,lane:s},V[s]=v}return this.measurementsCache=b,b},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=P(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,o,a)=>this.range=t.length>0&&r>0?ft({measurements:t,outerSize:r,scrollOffset:o,lanes:a}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=P(()=>{let t=null,r=null;const o=this.calculateRange();return o&&(t=o.startIndex,r=o.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,o,a,l)=>a===null||l===null?[]:t({startIndex:a,endIndex:l,overscan:r,count:o}),{key:"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,o=t.getAttribute(r);return o?parseInt(o,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const o=this.indexFromElement(t),a=this.measurementsCache[o];if(!a)return;const l=a.key,n=this.elementsCache.get(l);n!==t&&(n&&this.observer.unobserve(n),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(o,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const o=this.measurementsCache[t];if(!o)return;const a=this.itemSizeCache.get(o.key)??o.size,l=r-a;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,l,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",l),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,o)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(o))});return}this._measureElement(t,void 0)},this.getVirtualItems=P(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const o=[];for(let a=0,l=t.length;a<l;a++){const n=t[a],f=r[n];o.push(f)}return o},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return ie(r[we(0,r.length-1,o=>ie(r[o]).start,t)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const t=this.scrollElement.document.documentElement;return this.options.horizontal?t.scrollWidth-this.scrollElement.innerWidth:t.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(t,r,o=0)=>{if(!this.scrollElement)return 0;const a=this.getSize(),l=this.getScrollOffset();r==="auto"&&(r=t>=l+a?"end":"start"),r==="center"?t+=(o-a)/2:r==="end"&&(t-=a);const n=this.getMaxScrollOffset();return Math.max(Math.min(n,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const o=this.measurementsCache[t];if(!o)return;const a=this.getSize(),l=this.getScrollOffset();if(r==="auto")if(o.end>=l+a-this.options.scrollPaddingEnd)r="end";else if(o.start<=l+this.options.scrollPaddingStart)r="start";else return[l,r];if(r==="end"&&t===this.options.count-1)return[this.getMaxScrollOffset(),r];const n=r==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(n,r,o.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:o})},this.scrollToIndex=(t,{align:r="auto",behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1)),this.currentScrollToIndex=t;let a=0;const l=10,n=g=>{if(!this.targetWindow)return;const b=this.getOffsetForIndex(t,g);if(!b){console.warn("Failed to get offset for index:",t);return}const[V,v]=b;this._scrollToOffset(V,{adjustments:void 0,behavior:o}),this.targetWindow.requestAnimationFrame(()=>{const F=()=>{if(this.currentScrollToIndex!==t)return;const G=this.getScrollOffset(),s=this.getOffsetForIndex(t,v);if(!s){console.warn("Failed to get offset for index:",t);return}rt(s[0],G)||f(v)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(F):F()})},f=g=>{this.targetWindow&&this.currentScrollToIndex===t&&(a++,a<l?(this.options.debug&&console.info("Schedule retry",a,l),this.targetWindow.requestAnimationFrame(()=>n(g))):console.warn(`Failed to scroll to index ${t} after ${l} attempts.`))};n(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let o;if(r.length===0)o=this.options.paddingStart;else if(this.options.lanes===1)o=((t=r[r.length-1])==null?void 0:t.end)??0;else{const a=Array(this.options.lanes).fill(null);let l=r.length-1;for(;l>=0&&a.some(n=>n===null);){const n=r[l];a[n.lane]===null&&(a[n.lane]=n.end),l--}o=Math.max(...a.filter(n=>n!==null))}return Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:o})=>{this.options.scrollToFn(t,{behavior:o,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(c)}}const we=(i,c,t,r)=>{for(;i<=c;){const o=(i+c)/2|0,a=t(o);if(a<r)i=o+1;else if(a>r)c=o-1;else return o}return i>0?i-1:0};function ft({measurements:i,outerSize:c,scrollOffset:t,lanes:r}){const o=i.length-1,a=f=>i[f].start;if(i.length<=r)return{startIndex:0,endIndex:o};let l=we(0,o,a,t),n=l;if(r===1)for(;n<o&&i[n].end<t+c;)n++;else if(r>1){const f=Array(r).fill(0);for(;n<o&&f.some(b=>b<t+c);){const b=i[n];f[b.lane]=b.end,n++}const g=Array(r).fill(t+c);for(;l>=0&&g.some(b=>b>=t);){const b=i[l];g[b.lane]=b.start,l--}l=Math.max(0,l-l%r),n=Math.min(o,n+(r-1-n%r))}return{startIndex:l,endIndex:n}}const ce=typeof document<"u"?u.useLayoutEffect:u.useEffect;function Nt({useFlushSync:i=!0,...c}){const t=u.useReducer(()=>({}),{})[1],r={...c,onChange:(a,l)=>{var n;i&&l?ot.flushSync(t):t(),(n=c.onChange)==null||n.call(c,a,l)}},[o]=u.useState(()=>new ut(r));return o.setOptions(r),ce(()=>o._didMount(),[]),ce(()=>o._willUpdate()),o}function ht(i){return Nt({observeElementRect:lt,observeElementOffset:ct,scrollToFn:dt,...i})}const xt=({maxItems:i=50,autoScroll:c=!0,filterByAgent:t=[],onActivityClick:r})=>{const[o,a]=u.useState([]),[l,n]=u.useState(!1),[f,g]=u.useState(!1),[b,V]=u.useState(!0),[v,F]=u.useState(null),G=u.useRef(null),s=u.useRef(new Set),[j,w]=u.useState("all");u.useEffect(()=>()=>{s.current.forEach(clearTimeout),s.current.clear()},[]),u.useEffect(()=>{(async()=>{try{V(!0),F(null);const E=await fetch(`/api/agents/activities?limit=${i}&sortBy=timestamp&sortOrder=desc`);if(!E.ok)throw new Error(`Failed to fetch activities: ${E.statusText}`);const k=await E.json();if(k.success&&Array.isArray(k.data)){const N=k.data.map(T=>({id:T.id||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,agentId:T.agentId||T.agent||"unknown",agentName:T.agentName||T.agent||"Agent",type:T.type||(T.status==="completed"?"completed":T.status==="blocked"?"blocked":"working"),action:T.action||T.message||"Activity",details:T.details||T.description,confidence:T.confidence,timestamp:new Date(T.timestamp||Date.now()),relatedAgents:T.relatedAgents}));a(N)}else a([])}catch(p){const E=p instanceof Error?p.message:"Unknown error";console.error("[LiveActivityFeed] Failed to fetch initial activities:",E),F(E),a([])}finally{V(!1)}})()},[i]);const D=50,A=64;u.useEffect(()=>{let d=null,p=null,E=0;const k=3;let N=!1;const T=()=>{if(!N){if(E>=k){g(!1);return}try{const M=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;d=new WebSocket(M),d.onopen=()=>{if(N){d?.close();return}E=0,n(!0),g(!1)},d.onmessage=W=>{if(!N)try{const L=JSON.parse(W.data);if(L.type==="agent.activity"&&L.payload){const Q={id:L.payload.id||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,agentId:L.payload.agent||"unknown",agentName:L.payload.agentName||L.payload.agent||"Agent",type:L.payload.status==="completed"?"completed":L.payload.status==="blocked"?"blocked":"working",action:L.payload.action||"Activity",details:L.payload.details,timestamp:new Date(L.payload.timestamp||L.timestamp)};x(Q)}}catch{}},d.onerror=()=>{},d.onclose=()=>{if(!N)if(n(!1),E<k){E++;const W=2e3*Math.pow(2,E-1);g(!0),p=setTimeout(T,W)}else g(!1)}}catch($){console.error("WebSocket connection failed:",$),g(!1)}}};return T(),()=>{N=!0,p&&clearTimeout(p),d&&d.close()}},[]);const x=u.useCallback(d=>{a(p=>{const E=[{...d,isNew:!0},...p.slice(0,i-1)],k=setTimeout(()=>{s.current.delete(k),a(N=>N.map(T=>T.id===d.id?{...T,isNew:!1}:T))},2e3);return s.current.add(k),E}),c&&G.current&&G.current.scrollTo({top:0,behavior:"smooth"})},[i,c]),m=u.useCallback(async()=>{try{V(!0),F(null);const p=await fetch(`/api/agents/activities?limit=${i}&sortBy=timestamp&sortOrder=desc`);if(!p.ok)throw new Error(`Failed to fetch activities: ${p.statusText}`);const E=await p.json();if(E.success&&Array.isArray(E.data)){const k=E.data.map(N=>({id:N.id||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,agentId:N.agentId||N.agent||"unknown",agentName:N.agentName||N.agent||"Agent",type:N.type||(N.status==="completed"?"completed":N.status==="blocked"?"blocked":"working"),action:N.action||N.message||"Activity",details:N.details||N.description,confidence:N.confidence,timestamp:new Date(N.timestamp||Date.now()),relatedAgents:N.relatedAgents}));a(k)}else a([])}catch(d){const p=d instanceof Error?d.message:"Unknown error";console.error("[LiveActivityFeed] Failed to refresh activities:",p),F(p)}finally{V(!1)}},[i]),h=o.filter(d=>!(t.length>0&&!t.includes(d.agentId)||j==="important"&&d.type!=="completed"&&d.type!=="blocked"||j==="errors"&&d.type!=="blocked")),y=ht({count:h.length,getScrollElement:()=>G.current,estimateSize:()=>A,overscan:5}),X=h.length>D,O=d=>{switch(d){case"thinking":return e.jsxDEV(pe,{className:"w-4 h-4 text-yellow-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:310,columnNumber:16},void 0);case"working":return e.jsxDEV(be,{className:"w-4 h-4 text-blue-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:312,columnNumber:16},void 0);case"completed":return e.jsxDEV(ve,{className:"w-4 h-4 text-green-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:314,columnNumber:16},void 0);case"blocked":return e.jsxDEV(B,{className:"w-4 h-4 text-red-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:316,columnNumber:16},void 0);case"discussing":return e.jsxDEV(fe,{className:"w-4 h-4 text-purple-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:318,columnNumber:16},void 0)}},z=d=>{switch(d){case"thinking":return"border-yellow-500/20 bg-yellow-500/5";case"working":return"border-blue-500/20 bg-blue-500/5";case"completed":return"border-green-500/20 bg-green-500/5";case"blocked":return"border-red-500/20 bg-red-500/5";case"discussing":return"border-purple-500/20 bg-purple-500/5"}},_=d=>{const p=new Date,E=d instanceof Date?d:new Date(d),k=p.getTime()-E.getTime(),N=Math.floor(k/1e3);return N<60?"just now":N<3600?`${Math.floor(N/60)}m ago`:N<86400?`${Math.floor(N/3600)}h ago`:E.toLocaleDateString()};return e.jsxDEV("div",{"data-testid":"activity-feed-container",className:"h-full flex flex-col bg-gray-900/50 rounded-2xl border border-gray-800",children:[e.jsxDEV("div",{"data-testid":"activity-feed-header",className:"px-4 py-3 border-b border-gray-800",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(I,{className:"w-5 h-5 text-blue-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:361,columnNumber:13},void 0),e.jsxDEV("h3",{className:"font-semibold",children:"Live Activity"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:362,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-gray-800",children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${l?"bg-green-500":f?"bg-yellow-500 animate-pulse":"bg-red-500"}`},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:366,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-xs text-gray-400",children:l?"Live":f?"Reconnecting":"Offline"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:375,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:365,columnNumber:13},void 0),v&&e.jsxDEV("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-red-900/20",children:[e.jsxDEV(B,{className:"w-3 h-3 text-red-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:387,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-xs text-red-400",children:"Error"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:388,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:386,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:360,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{"data-testid":"activity-feed-filter-group",className:"flex gap-1 px-1 py-1 bg-gray-800 rounded-lg",children:[e.jsxDEV("button",{"data-testid":"activity-feed-filter-all",onClick:()=>w("all"),className:`px-2 py-1 rounded text-xs transition-all ${j==="all"?"bg-gray-700 text-gray-100":"text-gray-400 hover:text-gray-200"}`,children:"All"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:399,columnNumber:15},void 0),e.jsxDEV("button",{"data-testid":"activity-feed-filter-important",onClick:()=>w("important"),className:`px-2 py-1 rounded text-xs transition-all ${j==="important"?"bg-gray-700 text-gray-100":"text-gray-400 hover:text-gray-200"}`,children:"Important"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:410,columnNumber:15},void 0),e.jsxDEV("button",{"data-testid":"activity-feed-filter-errors",onClick:()=>w("errors"),className:`px-2 py-1 rounded text-xs transition-all ${j==="errors"?"bg-gray-700 text-gray-100":"text-gray-400 hover:text-gray-200"}`,children:"Errors"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:421,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:395,columnNumber:13},void 0),e.jsxDEV("button",{"data-testid":"activity-feed-refresh-btn",onClick:m,disabled:b,className:"p-1 hover:bg-gray-800 rounded transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh activities",children:e.jsxDEV(K,{className:`w-4 h-4 text-gray-400 ${b?"animate-spin":""}`},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:441,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:434,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:394,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:359,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:355,columnNumber:7},void 0),e.jsxDEV("div",{ref:G,className:"flex-1 overflow-y-auto px-2 py-2 max-h-100",children:h.length>0?X?e.jsxDEV("div",{style:{height:`${y.getTotalSize()}px`,position:"relative"},children:y.getVirtualItems().map(d=>{const p=h[d.index];return e.jsxDEV("div",{"data-testid":`activity-feed-item-${p.id||d.index}`,"data-index":d.index,ref:y.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${d.start}px)`},onClick:()=>r?.(p),className:`
                      relative px-3 py-2 mb-1 rounded-lg border transition-all cursor-pointer
                      ${z(p.type)}
                      hover:bg-gray-800/30
                    `,children:[p.isNew&&e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-transparent rounded-lg pointer-events-none animate-pulse"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:485,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"mt-0.5",children:O(p.type)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:490,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxDEV("span",{className:"font-medium text-sm text-blue-400",children:p.agentName},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:497,columnNumber:31},void 0),p.relatedAgents&&p.relatedAgents.length>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-xs text-gray-500",children:"with"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:503,columnNumber:37},void 0),e.jsxDEV("div",{className:"flex -space-x-1",children:[p.relatedAgents.slice(0,3).map((E,k)=>e.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-gray-700 border border-gray-900 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs text-gray-400",children:E[0]},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:514,columnNumber:45},void 0)},k,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:510,columnNumber:43},void 0)),p.relatedAgents.length>3&&e.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-gray-800 border border-gray-900 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs text-gray-500",children:["+",p.relatedAgents.length-3]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:521,columnNumber:43},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:520,columnNumber:41},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:506,columnNumber:37},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:502,columnNumber:35},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:496,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-sm text-gray-300 mt-0.5",children:p.action},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:531,columnNumber:29},void 0),p.details&&e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:p.details},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:536,columnNumber:31},void 0),p.confidence!==void 0&&e.jsxDEV("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxDEV("div",{className:"flex-1 max-w-[100px] h-1 bg-gray-800 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:`h-full transition-all duration-500 ease-out ${p.confidence>=80?"bg-green-500":p.confidence>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${p.confidence??0}%`}},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:545,columnNumber:35},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:544,columnNumber:33},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:[p.confidence??0,"% confident"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:556,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:543,columnNumber:31},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:495,columnNumber:27},void 0),e.jsxDEV("span",{"data-testid":`activity-feed-timestamp-${p.id}`,className:"text-xs text-gray-500 whitespace-nowrap",children:_(p.timestamp)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:564,columnNumber:27},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:494,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:493,columnNumber:23},void 0),e.jsxDEV("button",{onClick:E=>{E.stopPropagation()},className:"p-1 hover:bg-gray-700 rounded transition-all opacity-0 group-hover:opacity-100",children:e.jsxDEV(re,{className:"w-3 h-3 text-gray-500"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:581,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:574,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:488,columnNumber:21},void 0)]},p.id||`activity-${d.index}`,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:464,columnNumber:19},void 0)})},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:455,columnNumber:13},void 0):e.jsxDEV("div",{className:"space-y-1",children:e.jsxDEV(R,{mode:"popLayout",children:h.map((d,p)=>e.jsxDEV(C.div,{"data-testid":`activity-feed-item-${d.id||p}`,layout:!0,initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1,transition:{delay:p*.02,duration:.3,ease:[.16,1,.3,1]}},exit:{opacity:0,x:20,scale:.95},onClick:()=>r?.(d),className:`
                      relative px-3 py-2 rounded-lg border transition-all cursor-pointer
                      ${z(d.type)}
                      hover:bg-gray-800/30
                    `,children:[d.isNew&&e.jsxDEV(C.div,{initial:{opacity:1},animate:{opacity:0},transition:{duration:2},className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-transparent rounded-lg pointer-events-none"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:618,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"mt-0.5",children:O(d.type)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:628,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxDEV("span",{className:"font-medium text-sm text-blue-400",children:d.agentName},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:635,columnNumber:31},void 0),d.relatedAgents&&d.relatedAgents.length>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-xs text-gray-500",children:"with"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:641,columnNumber:37},void 0),e.jsxDEV("div",{className:"flex -space-x-1",children:[d.relatedAgents.slice(0,3).map((E,k)=>e.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-gray-700 border border-gray-900 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs text-gray-400",children:E[0]},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:652,columnNumber:45},void 0)},k,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:648,columnNumber:43},void 0)),d.relatedAgents.length>3&&e.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-gray-800 border border-gray-900 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs text-gray-500",children:["+",d.relatedAgents.length-3]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:659,columnNumber:43},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:658,columnNumber:41},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:644,columnNumber:37},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:640,columnNumber:35},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:634,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-sm text-gray-300 mt-0.5",children:d.action},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:669,columnNumber:29},void 0),d.details&&e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:d.details},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:674,columnNumber:31},void 0),d.confidence!==void 0&&e.jsxDEV("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxDEV("div",{className:"flex-1 max-w-[100px] h-1 bg-gray-800 rounded-full overflow-hidden",children:e.jsxDEV(C.div,{className:`h-full ${d.confidence>=80?"bg-green-500":d.confidence>=60?"bg-yellow-500":"bg-red-500"}`,initial:{width:0},animate:{width:`${d.confidence??0}%`},transition:{duration:.5,ease:[.16,1,.3,1]}},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:683,columnNumber:35},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:682,columnNumber:33},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:[d.confidence??0,"% confident"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:699,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:681,columnNumber:31},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:633,columnNumber:27},void 0),e.jsxDEV("span",{"data-testid":`activity-feed-timestamp-${d.id}`,className:"text-xs text-gray-500 whitespace-nowrap",children:_(d.timestamp)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:707,columnNumber:27},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:632,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:631,columnNumber:23},void 0),e.jsxDEV("button",{onClick:E=>{E.stopPropagation()},className:"p-1 hover:bg-gray-700 rounded transition-all opacity-0 group-hover:opacity-100",children:e.jsxDEV(re,{className:"w-3 h-3 text-gray-500"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:724,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:717,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:626,columnNumber:21},void 0)]},d.id||`activity-${p}`,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:593,columnNumber:19},void 0))},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:591,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:590,columnNumber:13},void 0):b?e.jsxDEV(C.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 rounded-2xl bg-gray-800 flex items-center justify-center mb-4",children:e.jsxDEV(K,{className:"w-8 h-8 text-blue-400 animate-spin"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:739,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:738,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-400 mb-1",children:"Loading activities..."},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:741,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Fetching recent agent activity"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:742,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:733,columnNumber:11},void 0):v?e.jsxDEV(C.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 rounded-2xl bg-red-900/20 flex items-center justify-center mb-4",children:e.jsxDEV(B,{className:"w-8 h-8 text-red-400"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:753,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:752,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-red-400 mb-1",children:"Failed to load activities"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:755,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mb-4",children:v},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:756,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-sm transition-all",children:"Retry"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:759,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:747,columnNumber:11},void 0):e.jsxDEV(C.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 rounded-2xl bg-gray-800 flex items-center justify-center mb-4",children:e.jsxDEV(I,{className:"w-8 h-8 text-gray-600"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:773,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:772,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-400 mb-1",children:"No activities yet"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:775,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:l?"Waiting for agent activity...":"Connecting to activity stream..."},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:776,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-2",children:"Activities will appear here when agents start working"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:781,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:767,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:448,columnNumber:7},void 0),h.length>0&&e.jsxDEV("div",{className:"px-4 py-2 border-t border-gray-800 bg-gray-900/30",children:e.jsxDEV("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxDEV("span",{children:["Showing ",h.length," activities"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:792,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>a([]),className:"flex items-center gap-1 hover:text-gray-300 transition-all",children:[e.jsxDEV(K,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:797,columnNumber:15},void 0),"Clear"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:793,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:791,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:790,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/LiveActivityFeed.tsx",lineNumber:350,columnNumber:5},void 0)},me=({agents:i,edges:c,onAgentClick:t,viewMode:r="network"})=>{const[o,a]=u.useState(null),[l,n]=u.useState(null),[f,g]=u.useState(new Set);u.useEffect(()=>{const s=setInterval(()=>{const j=i.filter(w=>w.status==="thinking"||w.status==="discussing");g(new Set(j.map(w=>w.id)))},1e3);return()=>clearInterval(s)},[i]);const b={architect:{color:"from-purple-500 to-indigo-500",icon:e.jsxDEV(pe,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:82,columnNumber:13},void 0),position:{x:200,y:100}},developer:{color:"from-blue-500 to-cyan-500",icon:e.jsxDEV(Ve,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:87,columnNumber:13},void 0),position:{x:100,y:200}},qa:{color:"from-green-500 to-emerald-500",icon:e.jsxDEV(se,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:92,columnNumber:13},void 0),position:{x:300,y:200}},devops:{color:"from-orange-500 to-red-500",icon:e.jsxDEV(xe,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:97,columnNumber:13},void 0),position:{x:150,y:300}},orchestrator:{color:"from-yellow-500 to-amber-500",icon:e.jsxDEV(ge,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:102,columnNumber:13},void 0),position:{x:200,y:200}}},V=s=>{switch(s){case"idle":return"bg-gray-500";case"thinking":return"bg-yellow-500";case"working":return"bg-green-500";case"blocked":return"bg-red-500";case"discussing":return"bg-blue-500"}},v=u.useMemo(()=>{const s={};return i.forEach((A,x)=>{if(A.role==="orchestrator")s[A.id]={x:250,y:250};else{const m=x*2*Math.PI/(i.length-1);s[A.id]={x:250+150*Math.cos(m),y:250+150*Math.sin(m)}}}),s},[i]),F=()=>e.jsxDEV("div",{"data-testid":"agent-collab-network-view",className:"relative w-full h-[500px] bg-gray-900/30 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxDEV("svg",{className:"absolute inset-0 w-full h-full",children:[e.jsxDEV("defs",{children:e.jsxDEV("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsxDEV("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#1f2937",strokeWidth:"1",opacity:"0.5"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:158,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:152,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:151,columnNumber:9},void 0),e.jsxDEV("rect",{width:"100%",height:"100%",fill:"url(#grid)"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:150,columnNumber:7},void 0),e.jsxDEV("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:[e.jsxDEV("defs",{children:[e.jsxDEV("linearGradient",{id:"edge-gradient-active",children:[e.jsxDEV("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:"0.6"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:174,columnNumber:13},void 0),e.jsxDEV("stop",{offset:"100%",stopColor:"#A855F7",stopOpacity:"0.6"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:175,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:173,columnNumber:11},void 0),e.jsxDEV("linearGradient",{id:"edge-gradient-inactive",children:[e.jsxDEV("stop",{offset:"0%",stopColor:"#6B7280",stopOpacity:"0.2"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:178,columnNumber:13},void 0),e.jsxDEV("stop",{offset:"100%",stopColor:"#6B7280",stopOpacity:"0.2"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:179,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:177,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:172,columnNumber:9},void 0),c.map((s,j)=>{const w=v[s.from],D=v[s.to];return!w||!D?null:e.jsxDEV("g",{"data-testid":`agent-collab-edge-${s.from}-${s.to}`,children:[e.jsxDEV(C.line,{x1:w.x,y1:w.y,x2:D.x,y2:D.y,stroke:s.isActive?"url(#edge-gradient-active)":"url(#edge-gradient-inactive)",strokeWidth:s.isActive?2:1,strokeDasharray:s.type==="handoff"?"5,5":"0",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:s.isActive?1:.3},transition:{duration:.5,delay:j*.1}},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:193,columnNumber:15},void 0),s.isActive&&e.jsxDEV(C.circle,{r:"3",fill:"#3B82F6",initial:{offsetDistance:"0%"},animate:{offsetDistance:"100%"},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsxDEV("animateMotion",{dur:"2s",repeatCount:"indefinite",path:`M ${w.x} ${w.y} L ${D.x} ${D.y}`},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:226,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:215,columnNumber:17},void 0)]},`${s.from}-${s.to}-${j}`,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:189,columnNumber:13},void 0)})]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:171,columnNumber:7},void 0),i.map((s,j)=>{const w=v[s.id],D=b[s.role],A=o===s.id,x=l===s.id,m=f.has(s.id);return e.jsxDEV(C.div,{"data-testid":`agent-collab-node-${s.id}`,className:"absolute cursor-pointer",style:{"--agent-x":`${w.x-30}px`,"--agent-y":`${w.y-30}px`,left:"var(--agent-x)",top:"var(--agent-y)"},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:j*.1,type:"spring"},onMouseEnter:()=>n(s.id),onMouseLeave:()=>n(null),onClick:()=>{a(s.id),t?.(s)},children:[s.status==="working"&&e.jsxDEV(C.div,{className:"absolute -inset-4 rounded-full bg-green-500/20",animate:{scale:[1,1.3,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0}},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:271,columnNumber:15},void 0),A&&e.jsxDEV(C.div,{className:"absolute -inset-2 rounded-full border-2 border-blue-400",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1}},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:286,columnNumber:15},void 0),e.jsxDEV(C.div,{className:`
                relative w-14 h-14 rounded-full bg-gradient-to-br ${D.color}
                flex items-center justify-center shadow-lg
              `,whileHover:{scale:1.1},whileTap:{scale:.95},children:[D.icon,e.jsxDEV("div",{className:`
                absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-gray-950
                ${V(s.status)}
                ${s.status!=="idle"?"animate-pulse":""}
              `},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:305,columnNumber:15},void 0),s.messagesInQueue>0&&e.jsxDEV("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs text-white font-bold",children:s.messagesInQueue},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:316,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:315,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:294,columnNumber:13},void 0),m&&e.jsxDEV("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2",children:e.jsxDEV("div",{className:"flex gap-0.5 px-2 py-1 bg-gray-800 rounded-full",children:[0,1,2].map(h=>e.jsxDEV(C.div,{className:"w-1.5 h-1.5 rounded-full bg-blue-400",animate:{y:[0,-4,0],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:h*.2}},h,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:328,columnNumber:21},void 0))},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:326,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:325,columnNumber:15},void 0),e.jsxDEV(R,{children:x&&e.jsxDEV(C.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 z-10",children:e.jsxDEV("div",{className:"px-3 py-2 bg-gray-900 rounded-lg border border-gray-700 shadow-xl whitespace-nowrap",children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-100",children:s.name},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:356,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-xs text-gray-400",children:s.role},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:359,columnNumber:21},void 0),s.currentTask&&e.jsxDEV("div",{className:"text-xs text-blue-400 mt-1",children:s.currentTask},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:361,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxDEV("div",{className:"text-xs text-gray-500",children:"Confidence:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:366,columnNumber:23},void 0),e.jsxDEV(ee,{value:s.confidence,max:100,className:"flex-1 h-1",bgColor:"bg-gray-700",fillColor:s.confidence>=80?"bg-green-500":s.confidence>=60?"bg-yellow-500":"bg-red-500",animated:!1},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:367,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-xs text-gray-400",children:[s.confidence,"%"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:381,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:365,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:355,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:349,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:347,columnNumber:13},void 0)]},s.id,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:247,columnNumber:11},void 0)}),e.jsxDEV("div",{className:"absolute top-4 left-4 px-3 py-2 bg-gray-900/90 rounded-lg border border-gray-800",children:e.jsxDEV("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-green-500"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:397,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-gray-400",children:"Active:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:398,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-gray-200 font-medium",children:i.filter(s=>s.status==="working").length},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:399,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:396,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-yellow-500"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:404,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-gray-400",children:"Thinking:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:405,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-gray-200 font-medium",children:i.filter(s=>s.status==="thinking").length},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:406,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:403,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-red-500"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:411,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-gray-400",children:"Blocked:"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:412,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-gray-200 font-medium",children:i.filter(s=>s.status==="blocked").length},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:413,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:410,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:395,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:394,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:145,columnNumber:5},void 0),G=()=>e.jsxDEV("div",{"data-testid":"agent-collab-list-view",className:"space-y-2",children:i.map((s,j)=>e.jsxDEV(C.div,{"data-testid":`agent-collab-list-item-${s.id}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:j*.05},onClick:()=>t?.(s),className:"p-4 rounded-xl bg-gray-900/50 border border-gray-800 hover:border-gray-700 cursor-pointer transition-all",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:`
                w-10 h-10 rounded-lg bg-gradient-to-br ${b[s.role].color}
                flex items-center justify-center
              `,children:b[s.role].icon},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:436,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:s.name},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:447,columnNumber:19},void 0),e.jsxDEV("div",{className:`
                    w-2 h-2 rounded-full ${V(s.status)}
                    ${s.status!=="idle"?"animate-pulse":""}
                  `},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:448,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500 capitalize",children:s.status},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:454,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:446,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-sm text-gray-400 mt-0.5",children:s.currentTask||"No active task"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:458,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:445,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:435,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-4",children:[s.collaboratingWith.length>0&&e.jsxDEV("div",{className:"flex -space-x-2",children:[s.collaboratingWith.slice(0,3).map((w,D)=>{const A=i.find(x=>x.id===w);return A?e.jsxDEV("div",{className:`
                          w-6 h-6 rounded-full bg-gradient-to-br ${b[A.role].color}
                          border-2 border-gray-900 flex items-center justify-center
                        `,title:A.name,children:e.jsxDEV("span",{className:"text-xs text-white font-bold",children:A.name[0]},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:480,columnNumber:25},void 0)},D,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:472,columnNumber:23},void 0):null}),s.collaboratingWith.length>3&&e.jsxDEV("div",{className:"w-6 h-6 rounded-full bg-gray-700 border-2 border-gray-900 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs text-gray-400",children:["+",s.collaboratingWith.length-3]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:488,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:487,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:467,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ee,{value:s.confidence,max:100,className:"w-24 h-1.5",fillColor:s.confidence>=80?"bg-green-500":s.confidence>=60?"bg-yellow-500":"bg-red-500",animated:!1},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:498,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:[s.confidence,"%"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:511,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:497,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-gray-400",children:"Tasks"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:519,columnNumber:19},void 0),e.jsxDEV("div",{className:"font-medium",children:s.performance.tasksCompleted},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:520,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:518,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-gray-400",children:"Success"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:525,columnNumber:19},void 0),e.jsxDEV("div",{className:"font-medium",children:[s.performance.successRate,"%"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:526,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:524,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:517,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:464,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:434,columnNumber:11},void 0)},s.id,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:425,columnNumber:9},void 0))},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:423,columnNumber:5},void 0);return e.jsxDEV("div",{"data-testid":"agent-collab-container",className:"space-y-4",children:[r==="network"&&F(),r==="list"&&G()]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/components/real-time/AgentCollaborationView.tsx",lineNumber:539,columnNumber:5},void 0)},vt={Activity:I,Zap:be,Shield:se,Network:ge,FileCode:qe,GitBranch:ke,BarChart3:Z,AlertTriangle:Se,Archive:Ke,RotateCcw:Ue,Package:Ae,Play:he,Settings:Xe,Users:q,Rocket:Ge,Target:te,FileText:Te,Search:J,CheckCircle:ve,Command:Ne,HelpCircle:Y};function bt(i){return i?vt[i]||Y:Y}function pt(i,c){const t=bt(i);return e.jsxDEV(t,{...c},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/utils/icon-mapper.tsx",lineNumber:78,columnNumber:10},this)}function gt(){const[i,c]=u.useState([]),[t,r]=u.useState(!0),[o,a]=u.useState(null);return u.useEffect(()=>{(async()=>{try{r(!0),a(null);const n=await fetch("/api/commands");if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const f=await n.json();if(!f.success)throw new Error(f.error||"Failed to fetch commands");const g=f.data.map(b=>({id:b.id,name:b.name,description:b.description,category:b.category,hotkey:b.hotkey,requiresConfirmation:b.requiresConfirmation,icon:pt(b.iconName,{className:"w-4 h-4"})}));c(g)}catch(n){const f=n instanceof Error?n.message:"Unknown error";a(f),console.error("[useForgeCommands] Failed to fetch commands:",n),c([])}finally{r(!1)}})()},[]),{commands:i,isLoading:t,error:o}}const wt=()=>"",jt=()=>typeof window<"u"?`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`:"ws://localhost:5051/ws",H={mission:"Building innovative solutions",goals:[],constraints:[],successMetrics:[],timeframe:"Ongoing"},de={phase:"planning",progress:0,blockers:[],recentDecisions:[],activeAgents:[],healthScore:0};function yt(){const[i,c]=u.useState(de),[t,r]=u.useState(H),[o,a]=u.useState(null),[l,n]=u.useState([]),[f,g]=u.useState(!0),[b,V]=u.useState(null),v=u.useRef(null),F=u.useRef(null),G=u.useRef(null),s=u.useRef(0),j=async(m,h)=>{try{const y=await fetch(`${wt()}${m}`);if(!y.ok)return console.warn(`[Dashboard] ${m} returned ${y.status}`),h;const X=await y.json();return X.data||X}catch(y){return console.warn(`[Dashboard] Failed to fetch ${m}:`,y),h}},w=m=>{if(!m)return 0;let h=100;if(m.git?.hasUncommitted&&(h-=5),m.git?.modified>0&&(h-=3),m.git?.untracked>5&&(h-=5),m.tests){const y=m.tests.passing||0,X=m.tests.total||0;if(X>0){const O=y/X*100;O<80?h-=20:O<90&&(h-=10)}}return m.build?.status==="error"&&(h-=15),m.governance&&(m.governance.status==="blocked"&&(h-=20),m.governance.workstreamsBlocked>0&&(h-=Math.min(m.governance.workstreamsBlocked*5,15))),Math.max(0,Math.min(100,h))},D=u.useCallback(async()=>{try{V(null);const[m,h,y,X]=await Promise.all([j("/api/forge/status",null),j("/api/vision",H),j("/api/state",null),j("/api/agents/active",[])]);a(m),r({mission:h.mission||H.mission,goals:Array.isArray(h.goals)?h.goals.map(O=>typeof O=="string"?O:O.title||O.description||""):[],constraints:Array.isArray(h.constraints)?h.constraints:[],successMetrics:Array.isArray(h.successMetrics)?h.successMetrics.map(O=>typeof O=="string"?O:O.name||""):[],timeframe:h.timeframe||H.timeframe}),c(y?{phase:y.phase||"planning",progress:y.progress||0,blockers:y.blockers||[],recentDecisions:y.recentDecisions||[],activeAgents:X||[],healthScore:w(m)}:{...de,activeAgents:X||[],healthScore:w(m)}),n(X||[]),g(!1)}catch(m){console.error("[Dashboard] Error fetching data:",m),V(m instanceof Error?m.message:"Failed to fetch dashboard data"),g(!1)}},[]),A=u.useCallback(()=>{if(v.current?.readyState!==WebSocket.OPEN)try{const m=new WebSocket(jt());v.current=m,m.onopen=()=>{console.log("[Dashboard] WebSocket connected"),s.current=0},m.onmessage=h=>{try{const y=JSON.parse(h.data);switch(y.type){case"state.update":y.data&&c(X=>({...X,phase:y.data.phase||X.phase,progress:y.data.progress??X.progress,blockers:y.data.blockers||X.blockers,recentDecisions:y.data.recentDecisions||X.recentDecisions}));break;case"agent.activity":j("/api/agents/active",[]).then(X=>{n(X),c(O=>({...O,activeAgents:X}))});break;case"vision.change":y.data&&r(X=>({mission:y.data.mission||X.mission,goals:y.data.goals||X.goals,constraints:y.data.constraints||X.constraints,successMetrics:y.data.successMetrics||X.successMetrics,timeframe:y.data.timeframe||X.timeframe}));break;case"pong":break}}catch(y){console.warn("[Dashboard] Failed to parse WebSocket message:",y)}},m.onerror=h=>{console.error("[Dashboard] WebSocket error:",h)},m.onclose=()=>{if(console.log("[Dashboard] WebSocket disconnected"),v.current=null,s.current<5){const h=Math.min(1e3*Math.pow(2,s.current),3e4);s.current++,G.current=setTimeout(()=>{console.log(`[Dashboard] Reconnecting (attempt ${s.current})...`),A()},h)}}}catch(m){console.error("[Dashboard] Failed to create WebSocket:",m)}},[]),x=u.useCallback(async()=>{await D()},[D]);return u.useEffect(()=>(D(),A(),F.current=setInterval(()=>{D()},3e4),()=>{F.current&&clearInterval(F.current),G.current&&clearTimeout(G.current),v.current&&v.current.close()}),[D,A]),{projectState:i,visionData:t,forgeStatus:o,agents:l,loading:f,error:b,refresh:x}}const Dt=[{key:"[",description:"Toggle Context panel",category:"navigation"},{key:"]",description:"Toggle Governance panel",category:"navigation"},{key:"1",description:"Overview tab",category:"navigation"},{key:"2",description:"Agents tab",category:"navigation"},{key:"3",description:"Activity tab",category:"navigation"},{key:"r",description:"Refresh data",category:"actions"},{key:"?",description:"Show keyboard shortcuts",category:"general"}],Ft=()=>{const{toast:i}=Me(),{mode:c}=$e(),{contextPanelVisible:t,governancePanelVisible:r,footerVisible:o,toggleContextPanel:a,toggleGovernancePanel:l,layout:n}=Ie(),[f,g]=u.useState("overview"),[b,V]=u.useState(!1),[v,F]=u.useState(""),{projectState:G,visionData:s,refresh:j}=yt(),{connectionState:w,messages:D,sendMessage:A,isConnected:x}=_e({url:`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,onOpen:()=>{i.success("Connected to Forge",{message:"Real-time updates enabled"})},onClose:()=>{i.warning("Connection lost",{message:"Attempting to reconnect...",persistent:!0})},onReconnect:N=>{N===1&&i.info(`Reconnecting... (Attempt ${N})`,{persistent:!0})}});u.useEffect(()=>{D.length>0&&(D.forEach(N=>{N.type==="task_completed"?i.success(`Task completed: ${N.payload?.name||"unknown"}`,{duration:3e3}):N.type==="blocker_detected"&&i.warning("New blocker detected",{message:N.payload?.title||"Unknown blocker"})}),j())},[D,i,j]);const{value:m,update:h,isUpdating:y}=He([],async N=>(await fetch("/api/commands/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commands:N})})).json()),{commands:X,isLoading:O,error:z}=gt();Be(j,{enabled:!x,baseInterval:5e3,maxInterval:3e4,onError:N=>{i.error("Failed to fetch status",{details:N.message})}}),u.useEffect(()=>{z&&i.error("Failed to load commands",{details:z,persistent:!1})},[z,i]);const _=u.useCallback(async(N,T)=>{V(!0);const $=Date.now().toString();i.info("Executing command",{...Re.commandExecuting(N),id:$});try{if(await h([...m,{command:N,args:T,timestamp:new Date}]),x)A({type:"execute_command",payload:{command:N,args:T}});else if(!(await fetch("/api/commands/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:N,args:T})})).ok)throw new Error("Command execution failed");i.success(`${N} completed successfully`,{duration:3e3})}catch(M){const W=M instanceof Error?M.message:"Unknown error";i.error(`${N} failed`,{message:"An error occurred while executing the command",details:W,actions:[{label:"Retry",onClick:()=>_(N,T)}]})}finally{V(!1)}},[i,m,h,x,A]),[d,p]=u.useState([]),[E,k]=u.useState([]);return u.useEffect(()=>{const N=async()=>{try{const $=await fetch("/api/workers");if(!$.ok)return;const M=await $.json();if(M.success&&M.data?.workers){const L=M.data.workers.map(S=>({id:S.id,name:S.assignedWorkstream||`Worker ${S.id.slice(0,6)}`,role:S.assignedWorkstream==="architect"?"architect":S.assignedWorkstream==="qa"?"qa":S.assignedWorkstream==="devops"?"devops":"developer",status:S.status==="idle"?"idle":S.status==="busy"?"working":S.status==="error"||S.status==="crashed"?"blocked":"thinking",currentTask:S.currentTask?.command,confidence:S.metrics?.successRate||75,collaboratingWith:[],messagesInQueue:0,lastActivity:S.lastActivity?new Date(S.lastActivity):new Date,performance:{tasksCompleted:S.metrics?.tasksCompleted||0,successRate:S.metrics?.successRate||0,avgResponseTime:S.metrics?.avgTaskDuration||0}}));p(L);const Q=L.slice(0,-1).map((S,je)=>({from:S.id,to:L[je+1].id,type:"handoff",isActive:S.status==="working",strength:.5}));k(Q)}}catch{}};N();const T=setInterval(N,5e3);return()=>clearInterval(T)},[]),u.useEffect(()=>{w.status==="connected"?F(`Connected to Forge. Latency ${w.latency} milliseconds.`):w.status==="reconnecting"?F("Connection lost. Attempting to reconnect."):w.status==="disconnected"&&F("Disconnected from Forge.")},[w.status,w.latency]),e.jsxDEV(ze,{title:"Dashboard",icon:e.jsxDEV(Z,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:313,columnNumber:13},void 0),badge:"Live",leftPanel:e.jsxDEV(Pe,{},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:315,columnNumber:18},void 0),rightPanel:e.jsxDEV(We,{},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:316,columnNumber:19},void 0),customShortcuts:Dt,children:e.jsxDEV("div",{className:"h-full bg-gray-950 text-white flex flex-col","data-testid":"live-dashboard-container",children:[e.jsxDEV("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"sr-only",children:v},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:324,columnNumber:9},void 0),e.jsxDEV("main",{className:"flex-1 min-w-0 bg-gray-950 overflow-y-auto",role:"main",id:"dashboard-content","aria-label":"Dashboard main content",children:[e.jsxDEV("div",{"data-testid":"live-dashboard-status-bar",role:"progressbar","aria-label":y?"Command executing":"No commands executing","aria-valuenow":y?void 0:0,className:"fixed top-0 left-0 right-0 z-50 h-1 bg-gray-900",children:e.jsxDEV(R,{children:y&&e.jsxDEV(C.div,{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1.5,repeat:1/0,ease:"linear"}},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:345,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:343,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:336,columnNumber:13},void 0),e.jsxDEV("div",{className:"border-b border-gray-800 bg-gray-900/30",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-6",children:e.jsxDEV("div",{className:"flex gap-1 py-2",role:"tablist","aria-label":"Dashboard view mode",children:[e.jsxDEV("button",{"data-testid":"live-dashboard-view-overview",onClick:()=>{g("overview"),F("Switched to Overview view")},role:"tab","aria-selected":f==="overview","aria-controls":"dashboard-content","aria-label":"Overview view",className:`
                  px-4 py-2 rounded-lg text-sm font-medium transition-all
                  ${f==="overview"?"bg-gray-800 text-gray-100":"text-gray-400 hover:text-gray-200"}
                `,children:[e.jsxDEV(Z,{className:"w-4 h-4 inline mr-2","aria-hidden":"true"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:382,columnNumber:17},void 0),"Overview"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:363,columnNumber:15},void 0),e.jsxDEV("button",{"data-testid":"live-dashboard-view-agents",onClick:()=>{g("agents"),F("Switched to Agents view")},role:"tab","aria-selected":f==="agents","aria-controls":"dashboard-content","aria-label":"Agents collaboration view",className:`
                  px-4 py-2 rounded-lg text-sm font-medium transition-all
                  ${f==="agents"?"bg-gray-800 text-gray-100":"text-gray-400 hover:text-gray-200"}
                `,children:[e.jsxDEV(q,{className:"w-4 h-4 inline mr-2","aria-hidden":"true"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:404,columnNumber:17},void 0),"Agents"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:385,columnNumber:15},void 0),e.jsxDEV("button",{"data-testid":"live-dashboard-view-activity",onClick:()=>{g("activity"),F("Switched to Activity view")},role:"tab","aria-selected":f==="activity","aria-controls":"dashboard-content","aria-label":"Live activity feed view",className:`
                  px-4 py-2 rounded-lg text-sm font-medium transition-all
                  ${f==="activity"?"bg-gray-800 text-gray-100":"text-gray-400 hover:text-gray-200"}
                `,children:[e.jsxDEV(I,{className:"w-4 h-4 inline mr-2","aria-hidden":"true"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:426,columnNumber:17},void 0),"Activity"]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:407,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:362,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:361,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:360,columnNumber:11},void 0),e.jsxDEV(R,{mode:"wait",children:[f==="overview"&&e.jsxDEV(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxDEV(tt,{visionData:s,projectState:G,agentActivity:[],onModeChange:()=>{},currentMode:c},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:442,columnNumber:15},void 0)},"overview",!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:436,columnNumber:13},void 0),f==="agents"&&e.jsxDEV(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxDEV("h1",{className:"text-2xl font-bold mb-8",children:"Agent Collaboration Network"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:460,columnNumber:15},void 0),e.jsxDEV(me,{agents:d,edges:E,viewMode:"network"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:463,columnNumber:15},void 0),e.jsxDEV("div",{className:"mt-8",children:[e.jsxDEV("h2",{className:"text-lg font-semibold mb-4",children:"Agent Details"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:469,columnNumber:17},void 0),e.jsxDEV(me,{agents:d,edges:E,viewMode:"list"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:470,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:468,columnNumber:15},void 0)]},"agents",!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:453,columnNumber:13},void 0),f==="activity"&&e.jsxDEV(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxDEV("h1",{className:"text-2xl font-bold mb-8",children:"Live Activity Feed"},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:487,columnNumber:15},void 0),e.jsxDEV(xt,{maxItems:100,autoScroll:!0},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:488,columnNumber:15},void 0)]},"activity",!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:480,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:434,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:334,columnNumber:9},void 0),e.jsxDEV(st,{onCommandExecute:_,availableCommands:X,projectContext:{name:"NXTG-Forge",phase:G.phase,activeAgents:d.filter(N=>N.status!=="idle").length,pendingTasks:G.blockers.length,healthScore:G.healthScore,lastActivity:new Date},isExecuting:b||y,isLoadingCommands:O},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:495,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:319,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:311,columnNumber:5},void 0)},Xt=()=>e.jsxDEV(Oe,{children:e.jsxDEV(Le,{children:e.jsxDEV(Ft,{},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:519,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:518,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/axw/projects/NXTG-Forge/v3/src/pages/dashboard-live.tsx",lineNumber:517,columnNumber:5},void 0);export{Xt as default};
//# sourceMappingURL=dashboard-live-xhg1a7WR.js.map
